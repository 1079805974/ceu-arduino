#include "arduino/arduino.ceu"
#include "arduino/avr.ceu"

input bool PIN_10;

{
    bitSet(PCIFR,  PCIF0);
    bitSet(PCICR,  PCIE0);
    pinMode(10, INPUT);
    bitSet(PCMSK0, PCINT4);
}

spawn async/isr [_PCINT0_vect, 0] do
    emit PIN_10(_digitalRead(10) as bool);
end
